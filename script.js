// Consolidated language data for all sections
const languageData = {
    en: {
        index: {
            title: "Denos Kume - Portfolio",
            name: "Denos Kume",
            job_title: "Aspiring DA | BSc CS & ELE Graduate",
            home: "Home",
            about: "About Me",
            education: "Education",
            experience: "Experience",
            training: "Training",
            certification: "Certification",
            contact: "Contact",
            social_media: "Social Media"
        },
        home: {
            name: "Denos Kume",
            job_title: "Aspiring Data Analyst | Embedded Systems Developer | AI Enthusiast",
            welcome_message: "Bringing data-driven insights to life with cutting-edge technology",
            cta_explore: "Explore My Work",
            cta_learn_more: "Learn More About Me",
            highlight_data_driven: "Data-Driven Solutions",
            highlight_data_driven_desc: "Transforming raw data into valuable insights for business growth.",
            highlight_embedded_systems: "Embedded Systems Expertise",
            highlight_embedded_systems_desc: "Developing systems that optimize performance and efficiency.",
            highlight_ai: "AI & Machine Learning",
            highlight_ai_desc: "Harnessing AI to drive innovation and solve complex problems.",
            services_title: "What I Offer:",
            service_data_analytics: "Data Analytics",
            service_data_analytics_desc: "Expert in data cleaning, manipulation, and visualization to support business intelligence.",
            service_embedded_systems: "Embedded Systems",
            service_embedded_systems_desc: "Designing and developing robust systems with a focus on performance and scalability.",
            service_ai: "AI & Machine Learning",
            service_ai_desc: "Applying cutting-edge machine learning techniques to solve real-world challenges.",
            cta_title: "Ready to Dive In?",
            cta_message: "Explore my projects, or get in touch to discuss how I can help drive your next data-driven innovation.",
            cta_view_projects: "View My Projects",
            cta_get_in_touch: "Get in Touch"
        },
        about: {
            personal_info_title: "Personal Information",
            phone: "Phone",
            location: "Location",
            website: "Website",
            education_title: "Education",
            education_degree: "BSc in Computer Science & Electronics",
            education_college: "Kristu Jayanti College | Graduated: 2024",
            experience_title: "Experience",
            experience_position: "Junior Data Analyst Intern",
            experience_company: "Unified Mentor | September 2024 - Present",
            experience_task_1: "Analyzed business datasets using Python and SQL.",
            experience_task_2: "Developed dashboards with Power BI.",
            experience_task_3: "Collaborated with the AI team on predictive models.",
            skills_title: "Skills",
            skill_data_analytics: "Data Analytics",
            skill_data_analytics_desc: "Python, SQL, Power BI, Data Cleaning, Data Visualization, Statistical Analysis",
            skill_embedded_systems: "Embedded Systems",
            skill_embedded_systems_desc: "IoT Development, Device Optimization, Data Collection, Performance Tuning"
        },
        projects: {
            project_uefa_title: "UEFA Champions League Dashboard",
            project_uefa_desc: "Built a Power BI dashboard analyzing the 2016 UEFA Champions League. Highlights include team statistics, top players, and performance trends, giving insights into match outcomes.",
            project_netflix_title: "Netflix Data Analysis",
            project_netflix_desc: "Analyzed and visualized Netflix data using Python and SQL, uncovering trends in movie and TV show ratings, user preferences, and regional content performance.",
            project_iot_title: "IoT Embedded Systems",
            project_iot_desc: "Developed embedded systems for IoT devices to optimize data collection and communication efficiency. Focused on scalability, low power consumption, and performance optimization.",
            explore_project: "Explore Project"
        }
    },
    fr: {
        index: {
            title: "Denos Kume - Portfolio",
            name: "Denos Kume",
            job_title: "DA Aspirationnel | Licence en CS & ELE",
            home: "Accueil",
            about: "À propos de moi",
            education: "Éducation",
            experience: "Expérience",
            training: "Formation",
            certification: "Certification",
            contact: "Contact",
            social_media: "Réseaux Sociaux"
        },
        home: {
            name: "Denos Kume",
            job_title: "Analyste de Données Aspirant | Développeur de Systèmes Embarqués | Enthousiaste en IA",
            welcome_message: "Apporter des insights basés sur les données avec des technologies de pointe",
            cta_explore: "Explorez Mon Travail",
            cta_learn_more: "En savoir plus sur moi",
            highlight_data_driven: "Solutions basées sur les données",
            highlight_data_driven_desc: "Transformer des données brutes en insights précieux pour la croissance des entreprises.",
            highlight_embedded_systems: "Expertise en systèmes embarqués",
            highlight_embedded_systems_desc: "Développer des systèmes optimisant la performance et l'efficacité.",
            highlight_ai: "IA et Apprentissage Automatique",
            highlight_ai_desc: "Exploiter l'IA pour innover et résoudre des problèmes complexes.",
            services_title: "Ce que j'offre:",
            service_data_analytics: "Analyse de Données",
            service_data_analytics_desc: "Expert en nettoyage, manipulation et visualisation des données pour soutenir l'intelligence d'affaires.",
            service_embedded_systems: "Systèmes Embarqués",
            service_embedded_systems_desc: "Conception et développement de systèmes robustes avec un accent sur la performance et l'évolutivité.",
            service_ai: "IA et Apprentissage Automatique",
            service_ai_desc: "Application des techniques avancées d'apprentissage automatique pour résoudre des défis réels.",
            cta_title: "Prêt à Plonger?",
            cta_message: "Explorez mes projets ou contactez-moi pour discuter de la façon dont je peux aider à piloter votre prochaine innovation basée sur les données.",
            cta_view_projects: "Voir mes projets",
            cta_get_in_touch: "Contactez-moi"
        },
        about: {
            personal_info_title: "Informations Personnelles",
            phone: "Téléphone",
            location: "Localisation",
            website: "Site Web",
            education_title: "Éducation",
            education_degree: "Licence en Informatique et Électronique",
            education_college: "Kristu Jayanti College | Diplômé: 2024",
            experience_title: "Expérience",
            experience_position: "Stagiaire Analyste de Données Junior",
            experience_company: "Unified Mentor | Septembre 2024 - Présent",
            experience_task_1: "Analyse des ensembles de données commerciales à l'aide de Python et SQL.",
            experience_task_2: "Développement de tableaux de bord avec Power BI.",
            experience_task_3: "Collaboration avec l'équipe IA sur les modèles prédictifs.",
            skills_title: "Compétences",
            skill_data_analytics: "Analyse de Données",
            skill_data_analytics_desc: "Python, SQL, Power BI, Nettoyage de Données, Visualisation de Données, Analyse Statistique",
            skill_embedded_systems: "Systèmes Embarqués",
            skill_embedded_systems_desc: "Développement IoT, Optimisation des Dispositifs, Collecte de Données, Réglage des Performances"
        },
        projects: {
            project_uefa_title: "Tableau de bord de la Ligue des Champions de l'UEFA",
            project_uefa_desc: "Création d'un tableau de bord Power BI analysant la Ligue des Champions de l'UEFA 2016. Points forts: statistiques des équipes, meilleurs joueurs, et tendances de performance, donnant un aperçu des résultats des matchs.",
            project_netflix_title: "Analyse des données Netflix",
            project_netflix_desc: "Analyse et visualisation des données Netflix à l'aide de Python et SQL, révélant des tendances dans les notes de films et d'émissions de télévision, les préférences des utilisateurs et les performances régionales du contenu.",
            project_iot_title: "Systèmes embarqués IoT",
            project_iot_desc: "Développement de systèmes embarqués pour les appareils IoT afin d'optimiser la collecte de données et l'efficacité de la communication.",
            explore_project: "Explorer le projet"
        }
    },
    es: {
        index: {
            title: "Denos Kume - Portafolio",
            name: "Denos Kume",
            job_title: "DA Aspirante | Licenciado en CS & ELE",
            home: "Inicio",
            about: "Sobre mí",
            education: "Educación",
            experience: "Experiencia",
            training: "Formación",
            certification: "Certificación",
            contact: "Contacto",
            social_media: "Redes Sociales"
        },
        home: {
            name: "Denos Kume",
            job_title: "Analista de Datos Aspirante | Desarrollador de Sistemas Embebidos | Entusiasta de IA",
            welcome_message: "Llevando ideas impulsadas por datos a la realidad con tecnología de vanguardia",
            cta_explore: "Explora mi trabajo",
            cta_learn_more: "Aprende más sobre mí",
            highlight_data_driven: "Soluciones Basadas en Datos",
            highlight_data_driven_desc: "Transformando datos en bruto en información valiosa para el crecimiento empresarial.",
            highlight_embedded_systems: "Experiencia en Sistemas Embebidos",
            highlight_embedded_systems_desc: "Desarrollo de sistemas que optimizan el rendimiento y la eficiencia.",
            highlight_ai: "IA y Aprendizaje Automático",
            highlight_ai_desc: "Aprovechando la IA para impulsar la innovación y resolver problemas complejos.",
            services_title: "Lo que Ofrezco:",
            service_data_analytics: "Análisis de Datos",
            service_data_analytics_desc: "Experto en limpieza, manipulación y visualización de datos para apoyar la inteligencia empresarial.",
            service_embedded_systems: "Sistemas Embebidos",
            service_embedded_systems_desc: "Diseño y desarrollo de sistemas robustos con un enfoque en rendimiento y escalabilidad.",
            service_ai: "IA y Aprendizaje Automático",
            service_ai_desc: "Aplicación de técnicas avanzadas de aprendizaje automático para resolver desafíos del mundo real.",
            cta_title: "¿Listo para Comenzar?",
            cta_message: "Explora mis proyectos o ponte en contacto para discutir cómo puedo ayudarte a impulsar tu próxima innovación basada en datos.",
            cta_view_projects: "Ver Mis Proyectos",
            cta_get_in_touch: "Ponte en contacto"
        },
        about: {
            personal_info_title: "Información Personal",
            phone: "Teléfono",
            location: "Ubicación",
            website: "Sitio Web",
            education_title: "Educación",
            education_degree: "Licenciatura en Informática y Electrónica",
            education_college: "Kristu Jayanti College | Graduado: 2024",
            experience_title: "Experiencia",
            experience_position: "Pasante Junior Analista de Datos",
            experience_company: "Unified Mentor | Septiembre 2024 - Presente",
            experience_task_1: "Análisis de conjuntos de datos comerciales utilizando Python y SQL.",
            experience_task_2: "Desarrollo de paneles con Power BI.",
            experience_task_3: "Colaboración con el equipo de IA en modelos predictivos.",
            skills_title: "Habilidades",
            skill_data_analytics: "Análisis de Datos",
            skill_data_analytics_desc: "Python, SQL, Power BI, Limpieza de Datos, Visualización de Datos, Análisis Estadístico",
            skill_embedded_systems: "Sistemas Embebidos",
            skill_embedded_systems_desc: "Desarrollo IoT, Optimización de Dispositivos, Recolección de Datos, Ajuste de Rendimiento"
        },
        projects: {
            project_uefa_title: "Panel de la Liga de Campeones de la UEFA",
            project_uefa_desc: "Creación de un panel de Power BI que analiza la Liga de Campeones de la UEFA 2016. Los aspectos destacados incluyen estadísticas de equipos, mejores jugadores y tendencias de rendimiento.",
            project_netflix_title: "Análisis de datos de Netflix",
            project_netflix_desc: "Análisis y visualización de datos de Netflix utilizando Python y SQL, descubriendo tendencias en las calificaciones de películas y programas de televisión, preferencias de los usuarios y rendimiento del contenido regional.",
            project_iot_title: "Sistemas embebidos IoT",
            project_iot_desc: "Desarrollo de sistemas embebidos para dispositivos IoT para optimizar la recolección de datos y la eficiencia de la comunicación.",
            explore_project: "Explorar Proyecto"
        }
    }
};

// Updated script to set language dynamically
function setLanguage(language, section) {
    const langElements = document.querySelectorAll(`[data-lang-key-${section}]`);
    langElements.forEach(element => {
        const key = element.getAttribute(`data-lang-key-${section}`);
        if (languageData[language][section][key]) {
            element.textContent = languageData[language][section][key];
        }
    });
}

// Function to determine the current section of the page
function determineCurrentSection() {
    const page = window.location.pathname.split("/").pop();
    if (page.includes("about")) return 'about';
    if (page.includes("projects")) return 'projects';
    if (page.includes("home")) return 'home';
    if (page.includes("training")) return 'training';
    if (page.includes("certification")) return 'certification';
    return 'index'; // Default to index
}

// Language switcher functionality
const languageSelector = document.getElementById("language-switcher");
if (languageSelector) {
    languageSelector.addEventListener("change", function () {
        const selectedLang = this.value;
        const currentSection = determineCurrentSection();
        setLanguage(selectedLang, currentSection);
    });
}

// Set default language on page load
window.onload = function () {
    const currentSection = determineCurrentSection();
    setLanguage('en', currentSection); // Default to English
};

// Dynamic content loading logic for pages
function loadContent(page) {
    const xhttp = new XMLHttpRequest();
    xhttp.onload = function () {
        const content = document.getElementById("content");
        if (content) {
            content.innerHTML = this.responseText;

            // Initialize any special effects (e.g., book effect)
            if (document.getElementById("book")) {
                $("#book").turn({
                    width: 800,
                    height: 600,
                    autoCenter: true
                });
            }
        }
    };
    xhttp.open("GET", `${page}.html`, true);
    xhttp.send();
}

// Load external HTML files (header/footer)
function loadExternalHTML(file, placeholderId, callback) {
    const xhttp = new XMLHttpRequest();
    xhttp.onload = function () {
        const placeholder = document.getElementById(placeholderId);
        if (placeholder) {
            placeholder.innerHTML = this.responseText;
            if (callback) callback(); // Callback after content load
        }
    };
    xhttp.open("GET", file, true);
    xhttp.send();
}

// Load default content when the page first loads
window.onload = function () {
    loadExternalHTML('header.html', 'header-placeholder'); // Load header
    loadContent('home'); // Default content is home page
    loadExternalHTML('footer.html', 'footer-placeholder', function () {
        // Initialize footer actions after loading
        const timeDisplay = document.getElementById("time-display");
        if (timeDisplay) {
            updateTime();
            setInterval(updateTime, 1000); // Update time every second
        }
    });
};

// Open and close mobile side navigation
function openNav() {
    const sideNav = document.getElementById("sideNav");
    if (sideNav) sideNav.style.width = "150px";
}

function closeNav() {
    const sideNav = document.getElementById("sideNav");
    if (sideNav) sideNav.style.width = "0";
}

// Function to update date and time
function updateTime() {
    const timeDisplay = document.getElementById("time-display");
    if (timeDisplay) {
        const now = new Date();
        const dateString = now.toLocaleDateString();
        const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        timeDisplay.textContent = `${dateString} ${timeString}`;
    }
}

// Search functionality
const searchData = [
    { title: "UEFA Champions League Dashboard", page: "uefa", keywords: ["football", "UEFA", "dashboard", "analysis", "champions"] },
    { title: "Netflix Data Analysis", page: "netflix", keywords: ["Netflix", "data analysis", "SQL", "Python"] },
    { title: "IoT Embedded Systems", page: "iot", keywords: ["IoT", "embedded systems", "devices", "data collection"] },
    { title: "AI-Powered Fraud Detection", page: "fraud", keywords: ["fraud detection", "AI", "machine learning"] },
    { title: "Supply Chain Management Dashboard", page: "supply-chain", keywords: ["supply chain", "Power BI", "inventory", "dashboard"] },
    { title: "AI-Based Predictive Maintenance", page: "predictive-maintenance", keywords: ["AI", "predictive maintenance", "machine learning"] }
];

// Show search suggestions based on input
function showSuggestions(value) {
    const suggestionsBox = document.getElementById('search-suggestions');
    suggestionsBox.innerHTML = ''; // Clear previous suggestions
    const results = value.length === 0
        ? searchData // Show all suggestions if input is empty
        : searchData.filter(item => item.keywords.some(keyword => keyword.toLowerCase().includes(value.toLowerCase())));

    if (results.length > 0) {
        results.forEach(result => {
            const suggestionDiv = document.createElement('div');
            suggestionDiv.innerHTML = `<strong>${result.title}</strong>`;
            suggestionDiv.onclick = function () {
                loadContent(result.page); // Load page dynamically
                suggestionsBox.style.display = 'none'; // Hide suggestions
                clearSearchInput(); // Clear search input
            };
            suggestionsBox.appendChild(suggestionDiv);
        });
        suggestionsBox.style.display = 'block'; // Show suggestions
    } else {
        suggestionsBox.style.display = 'none'; // Hide if no matches
    }
}

// Clear search input
function clearSearchInput() {
    const searchInput = document.querySelector('.search-bar input');
    if (searchInput) searchInput.value = '';
}

// Detect clicks outside of sideNav and close it
document.addEventListener('click', function (event) {
    const sideNav = document.getElementById("sideNav");
    const hamburger = document.querySelector('.hamburger');
    if (sideNav && sideNav.style.width === "150px" && !sideNav.contains(event.target) && !hamburger.contains(event.target)) {
        closeNav();
    }
});
